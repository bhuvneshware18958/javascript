<!DOCTYPE html>
<html>
<head>
    <title>Product Filter Example</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container">
    <h2>Enter Product Details</h2>
    <div class="row mt-1">
        <input type="text" id="productId" placeholder="Product ID" class="form-control">
    </div>
    <div class="row mt-1">
        <input type="text" id="productName" placeholder="Product Name" class="form-control">
    </div>
    <div class="row mt-1">
        <input type="text" id="productPrice" placeholder="Price" class="form-control">
    </div>
    <div class="row mt-1">
        <input type="text" id="productCategory" placeholder="Product Category" class="form-control">
    </div>
    <div class="row mt-1">
        <button onclick="addProduct()" class="btn btn-primary form-control">Add Product</button>
    </div>

    <div class="row mt-2">
        <h2>Filter by Category</h2>
        <select id="categoryDropdown" onchange="filterProducts()">
            <option value="">--Select Category--</option>
        </select>
    </div>

    <div class="row mt-2">
        <h2>Products</h2>
        <div id="productList"></div>
    </div>
</div>
<script>
    const products = [];

    function addProduct() {
        const id = document.getElementById("productId").value.trim();
        const name = document.getElementById("productName").value.trim();
        const price = document.getElementById("productPrice").value.trim();
        const category = document.getElementById("productCategory").value.trim();

        if (!id || !name || !price || !category) {
            alert("Please fill all fields.");
            return;
        }

        // Creating JSON Object
        const product = {
            id: id,
            name: name,
            price: price,
            category: category
        };

        products.push(product);

        updateCategoryDropdown();
        clearInputs();
    }

    function updateCategoryDropdown() {
        const dropdown = document.getElementById("categoryDropdown");
        // fetching unique category names
        const categories = Array.from(new Set(products.map(p => p.category)));

        dropdown.innerHTML = '<option value="">--Select Category--</option>';
        categories.forEach(cat => {
            const option = document.createElement("option");
            option.value = cat;
            option.textContent = cat;
            dropdown.appendChild(option);
        });
    }

    function filterProducts() {
        const selectedCategory = document.getElementById("categoryDropdown").value;
        const filteredProducts = products.filter(p => p.category === selectedCategory);

        const listDiv = document.getElementById("productList");
        listDiv.innerHTML = "";

        if (filteredProducts.length === 0) {
            listDiv.innerHTML = "<p>No products found in this category.</p>";
            return;
        }

        filteredProducts.forEach(p => {
            const productInfo = document.createElement("p");
            productInfo.textContent = `ID: ${p.id}, Name: ${p.name}, Price: ${p.price}, Category: ${p.category}`;
            listDiv.appendChild(productInfo);
        });
    }

    function clearInputs() {
        document.getElementById("productId").value = "";
        document.getElementById("productName").value = "";
        document.getElementById("productPrice").value = "";
        document.getElementById("productCategory").value = "";
    }
</script>

</body>
</html>
